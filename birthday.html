<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday My Pandy üêº</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin:0; padding:0; }
        html, body { height:100%; overflow-x: hidden; }
        body {
            font-family:"Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: linear-gradient(270deg,#ff4d6d,#ffcc70,#6dd5ed,#a1ffce,#fcb045,#fd1d1d,#833ab4);
            background-size: 1400% 1400%;
            animation: gradientShift 15s ease-in-out infinite;
            padding: 20px;
            position: relative;
            min-height: 100vh;
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000;
            will-change: transform;
            transition: filter 0.5s ease;
        }
        @keyframes gradientShift {
            0% { background-position:0% 50%; }
            50% { background-position:100% 50%; }
            100% { background-position:0% 50%; }
        }

        body.celebrate {
            animation: gradientShift 15s ease-in-out infinite;
            filter: brightness(2.5) saturate(2);
        }

        /* ---------- Floating emojis ---------- */
        .emoji {
            position: fixed;
            bottom: -10vh;
            font-size: 2rem;
            filter: drop-shadow(0 6px 8px rgba(0,0,0,.25));
            animation: floatUp linear forwards;
            opacity: 0.95;
            pointer-events: none;
            z-index: 1;
            will-change: transform, opacity;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) translateX(0) scale(.8); opacity:0; }
            10% { opacity:1; }
            100% { transform: translateY(-120vh) translateX(var(--drift,0)) scale(1.2); opacity:0; }
        }

        /* ---------- Confetti ---------- */
        .confetti {
            position: fixed;
            top: -10px;
            font-size: 20px;
            z-index: 3;
            pointer-events: none;
            animation: confettiFall linear forwards;
            will-change: transform;
        }
        @keyframes confettiFall {
            0% { transform: translateY(0) rotate(0deg); }
            100% { transform: translateY(120vh) rotate(360deg); }
        }

        /* ---------- Main Title ---------- */
        .title {
            font-family:"Dancing Script", cursive;
            font-size: clamp(28px, 6vw, 48px);
            text-align: center;
            margin-bottom: 20px;
            display:flex; justify-content:center; align-items:center; gap:12px; flex-wrap:wrap;
            z-index: 10;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
        }

        .title.celebrate {
            transform: scale(1.1);
            text-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 20px rgba(255,255,255,0.5);
        }
        
        .pulse {
            display:inline-block;
            font-size:1.4em;
            color:red;
            text-shadow:0 0 6px #fff,0 0 12px red,0 0 18px red;
            animation:pulseHeart 1.2s infinite alternate ease-in-out;
            will-change: transform;
        }
        @keyframes pulseHeart { 0%{transform:scale(1);filter:drop-shadow(0 0 6px red);} 100%{transform:scale(1.3);filter:drop-shadow(0 0 16px red);} }

        /* ---------- Promise Box ---------- */
        .promise-box {
            position: relative;
            width: 100%;
            max-width: 500px;
            padding: 30px 25px;
            border-radius: 20px;
            backdrop-filter: blur(14px);
            background: rgba(255,255,255,0.12);
            box-shadow:0 20px 50px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.25);
            text-align:left;
            line-height:1.6;
            overflow:hidden;
            z-index: 10;
            transition: all 0.5s ease;
            cursor: pointer;
            margin-bottom: 20px;
        }
        .promise-box:hover {
            transform: scale(1.02);
        }

        .promise-box.celebrate {
            box-shadow: 0 0 30px rgba(255,255,255,0.6), inset 0 0 20px rgba(255,255,255,0.3);
            animation: boxPulse 0.5s ease-in-out 3;
        }

        @keyframes boxPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .promise-box h2 {
            font-family:"Dancing Script", cursive;
            font-size: clamp(24px,5vw,36px);
            margin-bottom: 12px;
            text-align: center;
        }
        
        /* Closed state of promise box */
        .promise-box.closed {
            height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        
        .promise-content {
            display: none;
        }
        
        .promise-box.closed .promise-content {
            display: none;
        }
        
        .promise-box:not(.closed) .promise-content {
            display: block;
        }
        
        .promise-box:not(.closed) .closed-content {
            display: none;
        }
        
        .closed-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .click-text {
            font-family: "Dancing Script", cursive;
            font-size: 28px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .panda-icon {
            font-size: 40px;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            transition: transform 0.3s ease;
        }

        .promise-box.closed:hover .panda-icon {
            transform: rotate(10deg) scale(1.1);
        }

        /* ---------- New Boxes Container ---------- */
        .boxes-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            width: 100%;
            max-width: 800px;
            margin-top: 20px;
            z-index: 10;
            transition: all 0.5s ease;
        }
        
        .gift-box {
            flex: 1;
            min-width: 200px;
            max-width: 250px;
            height: 120px;
            padding: 20px;
            border-radius: 20px;
            backdrop-filter: blur(14px);
            background: rgba(255,255,255,0.12);
            box-shadow:0 20px 50px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.25);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
        }
        
        .gift-box:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255,255,255,0.4), inset 0 0 0 1px rgba(255,255,255,.5);
        }
        
        .gift-box h3 {
            font-family:"Dancing Script", cursive;
            font-size: 28px;
            color: white;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .gift-icon {
            font-size: 36px;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            transition: transform 0.3s ease;
        }
        
        .gift-box:hover .gift-icon {
            transform: rotate(10deg) scale(1.2);
        }

        /* Mini boxes style */
        .gift-box.mini {
            min-width: 60px;
            max-width: 60px;
            height: 60px;
            padding: 10px;
            margin: 5px;
            opacity: 0.9;
            z-index: 5;
        }
        
        .gift-box.mini h3 {
            display: none;
        }
        
        .gift-box.mini .gift-icon {
            font-size: 24px;
        }

        /* ---------- Enhanced Read Confirmation Box ---------- */
        .read-confirmation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            background: rgba(255, 105, 180, 0.25);
            box-shadow: 0 15px 35px rgba(0,0,0,.4), 
                        0 0 0 2px rgba(255, 255, 255, 0.3),
                        inset 0 0 20px rgba(255, 255, 255, 0.2);
            text-align: center;
            cursor: pointer;
            z-index: 20;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }
        
        .read-confirmation.visible {
            opacity: 1;
            visibility: visible;
            animation: bounceIn 0.8s forwards, glow 2s infinite alternate;
        }
        
        @keyframes bounceIn {
            0% { transform: translateX(-50%) scale(0.8) translateY(50px); opacity: 0; }
            60% { transform: translateX(-50%) scale(1.05) translateY(-10px); }
            80% { transform: translateX(-50%) scale(0.95) translateY(5px); }
            100% { transform: translateX(-50%) scale(1) translateY(0); opacity: 1; }
        }
        
        @keyframes glow {
            0% { box-shadow: 0 15px 35px rgba(0,0,0,.4), 
                             0 0 0 2px rgba(255, 255, 255, 0.3),
                             inset 0 0 20px rgba(255, 255, 255, 0.2); }
            100% { box-shadow: 0 15px 45px rgba(0,0,0,.5), 
                               0 0 0 3px rgba(255, 255, 255, 0.5),
                               inset 0 0 25px rgba(255, 255, 255, 0.3); }
        }
        
        .read-confirmation p {
            font-family: Poppins", sans-serif;
            font-size: 25px;
            font-weight: 600;
            font-weight: 600;
            color: #4a1e66;
            text-shadow: 0 2px 8px rgba(255,255,255,0.7);
            margin: 0;
            padding: 4px;
            letter-spacing: 0.5px;
            animation: textShine 3s infinite alternate;
        }
        
        @keyframes textShine {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        
        .read-confirmation:hover {
            transform: translateX(-50%) scale(1.05);
        }
        
        .read-confirmation:hover p {
            animation: textShine 1s infinite alternate;
        }

        /* ---------- Sparkles ---------- */
        .sparkle {
            position: absolute;
            font-size: 16px;
            opacity: 0.8;
            pointer-events: none;
            animation: sparkleAnim linear infinite;
            z-index:5;
            will-change: transform, opacity;
        }
        @keyframes sparkleAnim {
            0% { transform: translateY(0) scale(0.8); opacity:0; }
            10% { opacity:1; }
            100% { transform: translateY(-40px) scale(1.2); opacity:0; }
        }

        .footer-hearts {
            position: fixed;
            bottom:10px; left:50%;
            transform: translateX(-50%);
            color:#fff;
            opacity:.8;
            font-size:16px;
            text-shadow:0 2px 8px rgba(0,0,0,.3);
            z-index: 10;
        }
        
        /* ---------- Floating Balloons ---------- */
        .balloon {
            position: fixed;
            width: 40px;
            height: 50px;
            border-radius: 50%;
            bottom: -100px;
            animation: floatBalloon linear forwards;
            z-index: 2;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
            opacity: 0.9;
            will-change: transform;
        }
        
        .balloon:after {
            content: "";
            position: absolute;
            bottom: -12px;
            left: 50%;
            width: 2px;
            height: 25px;
            background: linear-gradient(to bottom, rgba(255,255,255,0.7), transparent);
            transform: translateX(-50%);
        }
        
        @keyframes floatBalloon {
            0% { transform: translateY(0) translateX(0) rotate(0deg); }
            100% { transform: translateY(-120vh) translateX(var(--drift,0)) rotate(10deg); }
        }
        
        /* ---------- Candle Effect ---------- */
        .candle {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 16px;
            background: #ff9d00;
            border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 10px #ff9d00, 0 0 20px #ff9d00;
            animation: flicker 0.6s infinite alternate;
            z-index: 5;
            will-change: transform, opacity, height;
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; height: 16px; }
            50% { opacity: 0.8; height: 14px; }
        }
        
        /* ---------- Floating Hearts ---------- */
        .floating-heart {
            position: fixed;
            font-size: 20px;
            opacity: 0;
            pointer-events: none;
            z-index: 2;
            animation: floatHeart linear forwards;
            will-change: transform, opacity;
        }
        
        @keyframes floatHeart {
            0% { transform: translateY(0) translateX(0) scale(0.5); opacity:0; }
            10% { opacity:0.7; }
            100% { transform: translateY(-100vh) translateX(var(--drift,0)) scale(1.2); opacity:0; }
        }

        /* Celebration particles */
        .particle {
            position: fixed;
            font-size: 16px;
            opacity: 0;
            pointer-events: none;
            z-index: 2;
            animation: particleAnim linear forwards;
            will-change: transform, opacity;
        }
        
        @keyframes particleAnim {
            0% { transform: translate(0, 0) scale(0.5) rotate(0deg); opacity:0; }
            10% { opacity:1; }
            100% { transform: translate(var(--tx, 0), var(--ty, -100px)) scale(1) rotate(360deg); opacity:0; }
        }
        
        /* ---------- Music Status ---------- */
        .music-status {
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 14px;
            opacity: 0.7;
            z-index: 10;
            text-align: center;
            background: rgba(0,0,0,0.2);
            padding: 4px 12px;
            border-radius: 12px;
            transition: opacity 0.3s ease;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .title {
                font-size: clamp(24px, 8vw, 36px);
                margin-bottom: 15px;
            }
            
            .promise-box {
                padding: 20px 15px;
                margin-bottom: 15px;
            }
            
            .promise-box.closed {
                height: 100px;
            }
            
            .click-text {
                font-size: 24px;
            }
            
            .panda-icon {
                font-size: 32px;
            }
            
            .boxes-container {
                gap: 15px;
                margin-top: 15px;
            }
            
            .gift-box {
                min-width: 150px;
                height: 100px;
                padding: 15px;
            }
            
            .gift-box h3 {
                font-size: 24px;
            }
            
            .gift-icon {
                font-size: 28px;
            }
            
            .gift-box.mini {
                min-width: 50px;
                max-width: 50px;
                height: 50px;
            }
            
            .gift-box.mini .gift-icon {
                font-size: 20px;
            }
            
            .read-confirmation {
                padding: 15px 25px;
                bottom: 20px;
                width: 90%;
            }
            
            .read-confirmation p {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>

    <!-- Main Title -->
    <div class="title" id="mainTitle">
        <span class="pulse">üêº</span>
        üéâ Happy Birthday My Pandy! üéâ
        <span class="pulse">üêº</span>
    </div>

    <!-- Promise Box - Initially Closed -->
    <div class="promise-box closed" id="promiseBox">
        <div class="closed-content">
            <div class="click-text">Click Me Pandy</div>
            <div class="panda-icon">üêº</div>
        </div>
        
        <div class="promise-content">
            <div class="candle"></div>
            <h2>üêº My Promise to You üêº</h2>
            <p>
                Every day with you feels like the most precious gift. On your special day, I promise to always stand by your side‚Äîsupporting you, loving you, and filling your life with smiles. You are my world, and I‚Äôm truly the luckiest person to have you.
Happy Birthday, my love! Here‚Äôs to countless more years of laughter, love, and unforgettable memories together. <br><br>
            </p>
        </div>
    </div>

    <!-- Enhanced Read Confirmation Box -->
    <div class="read-confirmation" id="readConfirmation">
        <p>Click me when you're done reading üíñ</p>
    </div>

    <!-- New Boxes Container -->
    <div class="boxes-container" id="boxesContainer">
        <div class="gift-box" id="wishesBox">
            <h3>Wishes</h3>
            <div class="gift-icon">üéÇ</div>
        </div>
        <div class="gift-box" id="surpriseBox">
            <h3>Surprise</h3>
            <div class="gift-icon">üéÅ</div>
        </div>
        <div class="gift-box" id="moreSurpriseBox">
            <h3>More Surprise</h3>
            <div class="gift-icon">‚ú®</div>
        </div>
    </div>

    <!-- Background Music - Using local file -->
    <audio id="birthdayMusic" loop>
        <source src="music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="footer-hearts">‚ù§Ô∏è üíñ üíû üíì üíó</div>
    <div class="music-status" id="musicStatus">Click anywhere to enable music üéµ</div>

    <script>
        // Performance optimization - limit animations on low-end devices
        const isLowEndDevice = () => {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) &&
            !/iPad|iPhone.*OS 1[3-9]|iPod.*OS 1[3-9]/.test(navigator.userAgent);
        };
        
        const animationMultiplier = isLowEndDevice() ? 0.5 : 1;
        
        // DOM elements
        const promiseBox = document.getElementById("promiseBox");
        const boxesContainer = document.getElementById("boxesContainer");
        const readConfirmation = document.getElementById("readConfirmation");
        const mainTitle = document.getElementById("mainTitle");
        const music = document.getElementById("birthdayMusic");
        const musicStatus = document.getElementById("musicStatus");
        
        // State variables
        let isPromiseOpen = false;
        let musicEnabled = false;
        
        // Floating emojis
        const EMOJIS = ["üéà","üíñ","‚ù§Ô∏è","üéÅ","üéÇ","üíù","üíû","üíì","‚ú®","‚≠ê","üéâ","üêº"];
        function spawnEmoji() {
            const e = document.createElement("div");
            e.className="emoji";
            e.textContent=EMOJIS[Math.floor(Math.random()*EMOJIS.length)];
            e.style.left=Math.random()*100+"vw";
            e.style.fontSize=(Math.random()*20+18)+"px";
            e.style.animationDuration=(Math.random()*4+6)*animationMultiplier+"s";
            e.style.setProperty("--drift",(Math.random()*60-30)+"px");
            document.body.appendChild(e);
            setTimeout(()=> e.remove(),12000);
        }
        
        // Confetti
        const CONFETTI=["üéâ","‚ú®","üíñ","üíù"];
        function spawnConfetti() {
            const c=document.createElement("div");
            c.className="confetti";
            c.textContent=CONFETTI[Math.floor(Math.random()*CONFETTI.length)];
            c.style.left=Math.random()*100+"vw";
            c.style.fontSize=(Math.random()*20+16)+"px";
            c.style.animationDuration=(Math.random()*4+4)*animationMultiplier+"s";
            document.body.appendChild(c);
            setTimeout(()=>c.remove(),8000);
        }
        
        // Sparkles around promise box
        function spawnSparkle() {
            const s=document.createElement("div");
            s.className="sparkle";
            s.textContent="‚ú®";
            const rect=promiseBox.getBoundingClientRect();
            s.style.left=(rect.left + Math.random()*rect.width) + "px";
            s.style.top=(rect.top + Math.random()*rect.height) + "px";
            s.style.animationDuration=(Math.random()*2+1)*animationMultiplier+"s";
            document.body.appendChild(s);
            setTimeout(()=> s.remove(), 2500);
        }
        
        // Floating balloons
        function spawnBalloon() {
            const colors = ['#ff6b6b', '#ff9f68', '#ffd166', '#96e6a1', '#7ec4cf', '#a283c4'];
            const b = document.createElement("div");
            b.className = "balloon";
            b.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            b.style.left = Math.random() * 100 + "vw";
            b.style.animationDuration = (Math.random() * 10 + 15) * animationMultiplier + "s";
            b.style.setProperty("--drift", (Math.random() * 80 - 40) + "px");
            document.body.appendChild(b);
            setTimeout(() => b.remove(), 25000);
        }
        
        // Floating hearts
        function spawnHeart() {
            const h = document.createElement("div");
            h.className = "floating-heart";
            h.textContent = "‚ù§Ô∏è";
            h.style.left = Math.random() * 100 + "vw";
            h.style.fontSize = (Math.random() * 16 + 14) + "px";
            h.style.animationDuration = (Math.random() * 5 + 8) * animationMultiplier + "s";
            h.style.setProperty("--drift", (Math.random() * 40 - 20) + "px");
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 15000);
        }

        // Celebration particles
        function spawnParticle(x, y) {
            const particles = ["‚ú®", "‚≠ê", "üíñ", "üéâ", "üéä", "üí´"];
            const p = document.createElement("div");
            p.className = "particle";
            p.textContent = particles[Math.floor(Math.random() * particles.length)];
            p.style.left = x + "px";
            p.style.top = y + "px";
            p.style.fontSize = (Math.random() * 20 + 16) + "px";
            p.style.animationDuration = (Math.random() * 2 + 1) + "s";
            p.style.setProperty("--tx", (Math.random() * 200 - 100) + "px");
            p.style.setProperty("--ty", (Math.random() * -150 - 50) + "px");
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 3000);
        }

        // Initialize animations with optimized intervals
        function initAnimations() {
            // Reduced animation frequency on low-end devices
            const emojiInterval = isLowEndDevice() ? 300 : 120;
            const confettiInterval = isLowEndDevice() ? 400 : 200;
            const sparkleInterval = isLowEndDevice() ? 300 : 200;
            const balloonInterval = isLowEndDevice() ? 2000 : 1000;
            const heartInterval = isLowEndDevice() ? 1200 : 800;
            
            // Pre-create some elements
            for(let i=0;i<20;i++) spawnEmoji();
            for(let i=0;i<10;i++) spawnConfetti();
            for(let i=0;i<5;i++) spawnBalloon();
            for(let i=0;i<8;i++) spawnHeart();
            
            // Set up intervals
            setInterval(spawnEmoji, emojiInterval);
            setInterval(spawnConfetti, confettiInterval);
            setInterval(spawnSparkle, sparkleInterval);
            setInterval(spawnBalloon, balloonInterval);
            setInterval(spawnHeart, heartInterval);
        }
        
        // Music handling - FIXED
        function enableSound() {
            if (musicEnabled) return;
            
            musicEnabled = true;
            music.volume = 0.5;
            
            // Try to play the music
            const playPromise = music.play();
            
            if (playPromise !== undefined) {
                playPromise
                .then(() => {
                    // Music started successfully
                    musicStatus.textContent = "Music is playing üéµ";
                    setTimeout(() => {
                        musicStatus.style.opacity = "0";
                        setTimeout(() => musicStatus.remove(), 1000);
                    }, 3000);
                })
                .catch(error => {
                    // Auto-play was prevented, show instruction
                    console.log("Playback failed:", error);
                    musicStatus.textContent = "Click to enable music üéµ";
                });
            }
            
            // Remove event listeners after first interaction
            window.removeEventListener("pointerdown", enableSound);
            window.removeEventListener("keydown", enableSound);
        }
        
        // Set up event listeners for user interaction
        window.addEventListener("pointerdown", enableSound, { once: true });
        window.addEventListener("keydown", enableSound, { once: true });
        
        // Try to play music automatically (might be muted by browser)
        music.play().catch((e) => {
            console.log("Autoplay with sound blocked, waiting for user interaction");
            musicStatus.textContent = "Click anywhere to enable music üéµ";
        });
        
        // Celebration effects
        function triggerCelebration() {
            // Add celebrate class to body for background effect
            document.body.classList.add('celebrate');
            mainTitle.classList.add('celebrate');
            promiseBox.classList.add('celebrate');
            
            // Speed up background animation temporarily
            document.body.style.animationDuration = '3s';
            
            // Add extra confetti
            for (let i = 0; i < 10; i++) {
                setTimeout(() => spawnConfetti(), i * 100);
            }
            
            // Add extra hearts
            for (let i = 0; i < 8; i++) {
                setTimeout(() => spawnHeart(), i * 150);
            }
            
            // Add particles around the promise box
            const rect = promiseBox.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    spawnParticle(centerX, centerY);
                }, i * 50);
            }
            
            // Remove effects after a short time
            setTimeout(() => {
                document.body.classList.remove('celebrate');
                mainTitle.classList.remove('celebrate');
                promiseBox.classList.remove('celebrate');
                document.body.style.animationDuration = '15s';
            }, 3000);
        }
        
        // Function to minimize other boxes
        function minimizeBoxes() {
            const giftBoxes = document.querySelectorAll('.gift-box');
            giftBoxes.forEach(box => {
                box.classList.add('mini');
            });
            
            // Fade out title slightly
            mainTitle.style.opacity = '0.7';
        }
        
        // Function to restore boxes to original state
        function restoreBoxes() {
            const giftBoxes = document.querySelectorAll('.gift-box');
            giftBoxes.forEach(box => {
                box.classList.remove('mini');
            });
            
            // Restore title opacity
            mainTitle.style.opacity = '1';
        }
        
        // Toggle promise box on click
        promiseBox.addEventListener('click', function() {
            if (!isPromiseOpen) {
                // Open the promise box
                this.classList.remove('closed');
                isPromiseOpen = true;
                
                // Minimize other boxes and fade title
                minimizeBoxes();
                
                // Trigger celebration
                triggerCelebration();
                
                // Show read confirmation after a delay
                setTimeout(() => {
                    readConfirmation.classList.add('visible');
                }, 2000);
            }
        });
        
        // Read confirmation click handler
        readConfirmation.addEventListener('click', function() {
            // Close the promise box
            promiseBox.classList.add('closed');
            isPromiseOpen = false;
            
            // Hide the read confirmation
            this.classList.remove('visible');
            
            // Restore other boxes and title
            restoreBoxes();
            
            // Small celebration
            triggerCelebration();
        });
        
        // Add click handlers for the new boxes to redirect to pages
        document.getElementById('wishesBox').addEventListener('click', function() {
            if (!isPromiseOpen) {
                triggerCelebration();
                // Redirect to wish.html after a short delay for the animation
                setTimeout(function() {
                    window.location.href = "wish.html";
                }, 1000);
            } else {
                // If boxes are minimized but still clickable
                triggerCelebration();
                setTimeout(function() {
                    window.location.href = "wish.html";
                }, 1000);
            }
        });
        
        document.getElementById('surpriseBox').addEventListener('click', function() {
            if (!isPromiseOpen) {
                triggerCelebration();
                // Redirect to surprise.html after a short delay for the animation
                setTimeout(function() {
                    window.location.href = "surprise.html";
                }, 1000);
            } else {
                // If boxes are minimized but still clickable
                triggerCelebration();
                setTimeout(function() {
                    window.location.href = "surprise.html";
                }, 1000);
            }
        });
        
        document.getElementById('moreSurpriseBox').addEventListener('click', function() {
            if (!isPromiseOpen) {
                triggerCelebration();
                // Redirect to more-surprise.html after a short delay for the animation
                setTimeout(function() {
                    window.location.href = "more-suprise.html";
                }, 1000);
            } else {
                // If boxes are minimized but still clickable
                triggerCelebration();
                setTimeout(function() {
                    window.location.href = "more-surprise.html";
                }, 1000);
            }
        });
        
        // Start everything when page loads
        window.addEventListener('load', function() {
            initAnimations();
        });
    </script>
</body>
</html>